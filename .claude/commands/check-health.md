# Check Health Skill

Run health checks on all ShieldOps platform dependencies.

## Usage
`/check-health [--fix]`

## Process

1. **Check Python environment**:
   - Verify Python 3.12+: `python3 --version`
   - Check virtual env: verify `.venv` or `VIRTUAL_ENV` is set
   - Validate dependencies: `pip check` for conflicts

2. **Check service dependencies**:
   - PostgreSQL: `pg_isready -h localhost -p 5432` or connect test
   - Redis: `redis-cli ping`
   - OPA: `curl http://localhost:8181/health`
   - Kafka: Check `docker ps` for kafka container

3. **Check code quality**:
   - Lint: `python3 -m ruff check src/ tests/`
   - Format: `python3 -m ruff format --check src/ tests/`
   - Type check: `python3 -m mypy src/shieldops/ --ignore-missing-imports`

4. **Run test suite**:
   - Unit tests: `python3 -m pytest tests/unit/ -v --tb=short`
   - Integration tests: `python3 -m pytest tests/integration/ -v --tb=short`
   - Report: total tests, passed, failed, coverage

5. **Platform feature health** (Phase 11–38 modules):
   - Capacity trends: `src/shieldops/analytics/capacity_trends.py` — CapacityTrendAnalyzer
   - SRE metrics: `src/shieldops/analytics/sre_metrics.py` — SREMetricsAggregator
   - Health reports: `src/shieldops/observability/health_report.py` — ServiceHealthReportGenerator
   - Cost forecasts: `src/shieldops/billing/cost_forecast.py` — CostForecastEngine
   - Deployment risk: `src/shieldops/changes/deployment_risk.py` — DeploymentRiskPredictor
   - Incident clustering: `src/shieldops/analytics/incident_clustering.py` — IncidentClusteringEngine
   - Tenant isolation: `src/shieldops/policy/tenant_isolation.py` — TenantResourceIsolationManager
   - Alert noise: `src/shieldops/observability/alert_noise.py` — AlertNoiseAnalyzer
   - Threshold tuner: `src/shieldops/observability/threshold_tuner.py` — ThresholdTuningEngine
   - Severity predictor: `src/shieldops/incidents/severity_predictor.py` — IncidentSeverityPredictor
   - Impact analyzer: `src/shieldops/topology/impact_analyzer.py` — ServiceDependencyImpactAnalyzer
   - Config audit: `src/shieldops/audit/config_audit.py` — ConfigurationAuditTrail
   - Deployment velocity: `src/shieldops/analytics/deployment_velocity.py` — DeploymentVelocityTracker
   - Compliance automation: `src/shieldops/compliance/automation_rules.py` — ComplianceAutomationEngine
   - Knowledge base: `src/shieldops/knowledge/article_manager.py` — KnowledgeBaseManager
   - On-call fatigue: `src/shieldops/incidents/oncall_fatigue.py` — OnCallFatigueAnalyzer
   - Backup verification: `src/shieldops/observability/backup_verification.py` — BackupVerificationEngine
   - Cost tag enforcer: `src/shieldops/billing/cost_tag_enforcer.py` — CostAllocationTagEnforcer
   - DR readiness: `src/shieldops/observability/dr_readiness.py` — DisasterRecoveryReadinessTracker
   - Service catalog: `src/shieldops/topology/service_catalog.py` — ServiceCatalogManager
   - Contract testing: `src/shieldops/api/contract_testing.py` — APIContractTestingEngine
   - Orphan detector: `src/shieldops/billing/orphan_detector.py` — OrphanedResourceDetector
   - Latency profiler: `src/shieldops/analytics/latency_profiler.py` — ServiceLatencyProfiler
   - License scanner: `src/shieldops/compliance/license_scanner.py` — DependencyLicenseScanner
   - Release manager: `src/shieldops/changes/release_manager.py` — ReleaseManagementTracker
   - Budget manager: `src/shieldops/billing/budget_manager.py` — InfrastructureCostBudgetManager
   - Config parity: `src/shieldops/config/parity_validator.py` — ConfigurationParityValidator
   - Incident dedup: `src/shieldops/incidents/dedup_engine.py` — IncidentDeduplicationEngine
   - Access certification: `src/shieldops/compliance/access_certification.py` — AccessCertificationManager
   - Toil tracker: `src/shieldops/analytics/toil_tracker.py` — ToilMeasurementTracker
   - Trace analyzer: `src/shieldops/analytics/trace_analyzer.py` — DistributedTraceAnalyzer
   - Log anomaly: `src/shieldops/analytics/log_anomaly.py` — LogAnomalyDetector
   - Event correlation: `src/shieldops/analytics/event_correlation.py` — EventCorrelationEngine
   - Security incidents: `src/shieldops/security/incident_response.py` — SecurityIncidentResponseTracker
   - Vuln lifecycle: `src/shieldops/security/vuln_lifecycle.py` — VulnerabilityLifecycleManager
   - API security: `src/shieldops/security/api_security.py` — APISecurityMonitor
   - Tag governance: `src/shieldops/billing/tag_governance.py` — ResourceTagGovernanceEngine
   - Team performance: `src/shieldops/analytics/team_performance.py` — TeamPerformanceAnalyzer
   - Runbook engine: `src/shieldops/operations/runbook_engine.py` — RunbookExecutionEngine
   - Dependency scorer: `src/shieldops/topology/dependency_scorer.py` — DependencyHealthScorer
   - Burn predictor: `src/shieldops/sla/burn_predictor.py` — SLOBurnRatePredictor
   - Change intelligence: `src/shieldops/changes/change_intelligence.py` — ChangeIntelligenceAnalyzer
   - DB performance: `src/shieldops/analytics/db_performance.py` — DatabasePerformanceAnalyzer
   - Queue health: `src/shieldops/observability/queue_health.py` — QueueHealthMonitor
   - Cert monitor: `src/shieldops/security/cert_monitor.py` — CertificateExpiryMonitor
   - Network flow: `src/shieldops/security/network_flow.py` — NetworkFlowAnalyzer
   - DNS health: `src/shieldops/observability/dns_health.py` — DNSHealthMonitor
   - Escalation analyzer: `src/shieldops/incidents/escalation_analyzer.py` — EscalationPatternAnalyzer
   - Right sizer: `src/shieldops/billing/right_sizer.py` — CapacityRightSizer
   - Storage optimizer: `src/shieldops/billing/storage_optimizer.py` — StorageTierOptimizer
   - Resource lifecycle: `src/shieldops/billing/resource_lifecycle.py` — ResourceLifecycleTracker
   - Alert routing: `src/shieldops/observability/alert_routing.py` — AlertRoutingOptimizer
   - SLO advisor: `src/shieldops/sla/slo_advisor.py` — SLOTargetAdvisor
   - Workload scheduler: `src/shieldops/operations/workload_scheduler.py` — WorkloadSchedulingOptimizer
   - Cascade predictor: `src/shieldops/topology/cascade_predictor.py` — CascadingFailurePredictor
   - Resilience scorer: `src/shieldops/observability/resilience_scorer.py` — ResilienceScoreCalculator
   - Timeline reconstructor: `src/shieldops/incidents/timeline_reconstructor.py` — IncidentTimelineReconstructor
   - RI optimizer: `src/shieldops/billing/reserved_instance_optimizer.py` — ReservedInstanceOptimizer
   - Cost anomaly RCA: `src/shieldops/billing/cost_anomaly_rca.py` — CostAnomalyRootCauseAnalyzer
   - Spend allocation: `src/shieldops/billing/spend_allocation.py` — SpendAllocationEngine
   - Container scanner: `src/shieldops/security/container_scanner.py` — ContainerImageScanner
   - Cloud posture: `src/shieldops/security/cloud_posture_manager.py` — CloudSecurityPostureManager
   - Secrets detector: `src/shieldops/security/secrets_detector.py` — SecretsSprawlDetector
   - Runbook effectiveness: `src/shieldops/operations/runbook_effectiveness.py` — RunbookEffectivenessAnalyzer
   - API deprecation: `src/shieldops/analytics/api_deprecation_tracker.py` — APIDeprecationTracker
   - Dependency freshness: `src/shieldops/analytics/dependency_freshness.py` — DependencyFreshnessMonitor
   - Chaos designer: `src/shieldops/observability/chaos_designer.py` — ChaosExperimentDesigner
   - Game day planner: `src/shieldops/operations/game_day_planner.py` — GameDayPlanner
   - Failure mode catalog: `src/shieldops/topology/failure_mode_catalog.py` — FailureModeCatalog
   - On-call optimizer: `src/shieldops/incidents/oncall_optimizer.py` — OnCallRotationOptimizer
   - Alert correlation rules: `src/shieldops/observability/alert_correlation_rules.py` — AlertCorrelationRuleEngine
   - Incident review board: `src/shieldops/incidents/review_board.py` — IncidentReviewBoard
   - Commitment planner: `src/shieldops/billing/commitment_planner.py` — CloudCommitmentPlanner
   - Cost simulator: `src/shieldops/billing/cost_simulator.py` — CostSimulationEngine
   - FinOps maturity: `src/shieldops/billing/finops_maturity.py` — FinOpsMaturityScorer
   - Change failure tracker: `src/shieldops/changes/change_failure_tracker.py` — ChangeFailureRateTracker
   - Toil recommender: `src/shieldops/operations/toil_recommender.py` — ToilAutomationRecommender
   - SLI pipeline: `src/shieldops/sla/sli_pipeline.py` — SLICalculationPipeline
   - Deployment cadence: `src/shieldops/analytics/deployment_cadence.py` — DeploymentCadenceAnalyzer
   - Metric baseline: `src/shieldops/observability/metric_baseline.py` — MetricBaselineManager
   - Incident timeline: `src/shieldops/incidents/incident_timeline.py` — IncidentTimelineAnalyzer
   - Service health agg: `src/shieldops/topology/service_health_agg.py` — ServiceHealthAggregator
   - Alert fatigue: `src/shieldops/observability/alert_fatigue.py` — AlertFatigueScorer
   - Change window: `src/shieldops/changes/change_window.py` — ChangeWindowOptimizer
   - Resource waste: `src/shieldops/billing/resource_waste.py` — ResourceWasteDetector
   - Evidence chain: `src/shieldops/compliance/evidence_chain.py` — ComplianceEvidenceChain
   - Dependency update planner: `src/shieldops/topology/dependency_update_planner.py` — DependencyUpdatePlanner
   - Capacity forecast engine: `src/shieldops/analytics/capacity_forecast_engine.py` — CapacityForecastEngine
   - Runbook versioner: `src/shieldops/operations/runbook_versioner.py` — RunbookVersionManager
   - Team skill matrix: `src/shieldops/operations/team_skill_matrix.py` — TeamSkillMatrix
   - Error budget policy: `src/shieldops/sla/error_budget_policy.py` — ErrorBudgetPolicyEngine
   - Reliability target: `src/shieldops/sla/reliability_target.py` — ReliabilityTargetAdvisor
   - Severity calibrator: `src/shieldops/incidents/severity_calibrator.py` — IncidentSeverityCalibrator
   - Dependency mapper: `src/shieldops/topology/dependency_mapper.py` — ServiceDependencyMapper
   - Alert rule linter: `src/shieldops/observability/alert_rule_linter.py` — AlertRuleLinter
   - Deployment gate: `src/shieldops/changes/deployment_gate.py` — DeploymentApprovalGate
   - Billing reconciler: `src/shieldops/billing/billing_reconciler.py` — CloudBillingReconciler
   - Chargeback engine: `src/shieldops/billing/chargeback_engine.py` — CostChargebackEngine
   - Compliance drift: `src/shieldops/compliance/compliance_drift.py` — ComplianceDriftDetector
   - Comm planner: `src/shieldops/incidents/comm_planner.py` — IncidentCommunicationPlanner
   - Infra drift reconciler: `src/shieldops/operations/infra_drift_reconciler.py` — InfrastructureDriftReconciler
   - Service maturity: `src/shieldops/topology/service_maturity.py` — ServiceMaturityModel
   - Capacity right-timing: `src/shieldops/operations/capacity_right_timing.py` — CapacityRightTimingAdvisor
   - Outage predictor: `src/shieldops/observability/outage_predictor.py` — PredictiveOutageDetector
   - Impact quantifier: `src/shieldops/incidents/impact_quantifier.py` — IncidentImpactQuantifier
   - Policy violation tracker: `src/shieldops/compliance/policy_violation_tracker.py` — PolicyViolationTracker
   - Deploy health scorer: `src/shieldops/changes/deploy_health_scorer.py` — DeploymentHealthScorer
   - Runbook gap analyzer: `src/shieldops/operations/runbook_gap_analyzer.py` — RunbookGapAnalyzer
   - Credential expiry forecaster: `src/shieldops/security/credential_expiry_forecaster.py` — CredentialExpiryForecaster
   - On-call workload balancer: `src/shieldops/incidents/oncall_workload_balancer.py` — OnCallWorkloadBalancer
   - Cost anomaly predictor: `src/shieldops/billing/cost_anomaly_predictor.py` — CostAnomalyPredictor
   - Evidence scheduler: `src/shieldops/compliance/evidence_scheduler.py` — ComplianceEvidenceScheduler
   - Latency budget tracker: `src/shieldops/analytics/latency_budget_tracker.py` — LatencyBudgetTracker
   - Change conflict detector: `src/shieldops/changes/change_conflict_detector.py` — ChangeConflictDetector
   - Duration predictor: `src/shieldops/incidents/duration_predictor.py` — IncidentDurationPredictor
   - Resource exhaustion: `src/shieldops/analytics/resource_exhaustion.py` — ResourceExhaustionForecaster
   - Alert storm correlator: `src/shieldops/observability/alert_storm_correlator.py` — AlertStormCorrelator
   - Canary analyzer: `src/shieldops/changes/canary_analyzer.py` — DeploymentCanaryAnalyzer
   - SLA cascader: `src/shieldops/sla/sla_cascader.py` — ServiceSLACascader
   - Handoff tracker: `src/shieldops/incidents/handoff_tracker.py` — IncidentHandoffTracker
   - Unit economics: `src/shieldops/billing/unit_economics.py` — CostUnitEconomicsEngine
   - Idle resource detector: `src/shieldops/billing/idle_resource_detector.py` — IdleResourceDetector
   - Penalty calculator: `src/shieldops/sla/penalty_calculator.py` — SLAPenaltyCalculator
   - Posture trend: `src/shieldops/security/posture_trend.py` — SecurityPostureTrendAnalyzer
   - Evidence freshness: `src/shieldops/compliance/evidence_freshness.py` — EvidenceFreshnessMonitor
   - Access anomaly: `src/shieldops/security/access_anomaly.py` — AccessAnomalyDetector
   - Response advisor: `src/shieldops/incidents/response_advisor.py` — IncidentResponseAdvisor
   - Metric RCA: `src/shieldops/analytics/metric_rca.py` — MetricRootCauseAnalyzer
   - SLO forecast: `src/shieldops/sla/slo_forecast.py` — SLOComplianceForecaster
   - Remediation decision: `src/shieldops/operations/remediation_decision.py` — AutoRemediationDecisionEngine
   - Dependency lag: `src/shieldops/topology/dependency_lag.py` — DependencyLagMonitor
   - Escalation effectiveness: `src/shieldops/incidents/escalation_effectiveness.py` — EscalationEffectivenessTracker
   - Discount optimizer: `src/shieldops/billing/discount_optimizer.py` — CloudDiscountOptimizer
   - Audit trail analyzer: `src/shieldops/compliance/audit_trail_analyzer.py` — ComplianceAuditTrailAnalyzer
   - Velocity throttle: `src/shieldops/changes/velocity_throttle.py` — ChangeVelocityThrottle
   - Alert tuning feedback: `src/shieldops/observability/alert_tuning_feedback.py` — AlertTuningFeedbackLoop
   - Knowledge decay: `src/shieldops/knowledge/knowledge_decay.py` — KnowledgeDecayDetector
   - Coverage scorer: `src/shieldops/observability/coverage_scorer.py` — ObservabilityCoverageScorer
   - Cardinality manager: `src/shieldops/observability/cardinality_manager.py` — MetricCardinalityManager
   - Log retention optimizer: `src/shieldops/observability/log_retention_optimizer.py` — LogRetentionOptimizer
   - Dashboard quality: `src/shieldops/observability/dashboard_quality.py` — DashboardQualityScorer
   - Action tracker: `src/shieldops/incidents/action_tracker.py` — PostIncidentActionTracker
   - Deployment confidence: `src/shieldops/changes/deployment_confidence.py` — DeploymentConfidenceScorer
   - Reliability regression: `src/shieldops/sla/reliability_regression.py` — ReliabilityRegressionDetector
   - Permission drift: `src/shieldops/security/permission_drift.py` — PermissionDriftDetector
   - Flag lifecycle: `src/shieldops/config/flag_lifecycle.py` — FeatureFlagLifecycleManager
   - API version health: `src/shieldops/topology/api_version_health.py` — APIVersionHealthMonitor
   - SRE maturity: `src/shieldops/operations/sre_maturity.py` — SREMaturityAssessor
   - Learning tracker: `src/shieldops/incidents/learning_tracker.py` — IncidentLearningTracker
   - Cache effectiveness: `src/shieldops/analytics/cache_effectiveness.py` — CacheEffectivenessAnalyzer
   - Build pipeline: `src/shieldops/analytics/build_pipeline.py` — BuildPipelineAnalyzer
   - Review velocity: `src/shieldops/analytics/review_velocity.py` — CodeReviewVelocityTracker
   - Dev environment: `src/shieldops/operations/dev_environment.py` — DevEnvironmentHealthMonitor
   - Traffic pattern: `src/shieldops/topology/traffic_pattern.py` — TrafficPatternAnalyzer
   - Rate limit policy: `src/shieldops/topology/rate_limit_policy.py` — RateLimitPolicyManager
   - Circuit breaker health: `src/shieldops/topology/circuit_breaker_health.py` — CircuitBreakerHealthMonitor
   - Data pipeline: `src/shieldops/observability/data_pipeline.py` — DataPipelineReliabilityMonitor
   - Queue depth forecast: `src/shieldops/observability/queue_depth_forecast.py` — QueueDepthForecaster
   - Connection pool: `src/shieldops/analytics/connection_pool.py` — ConnectionPoolMonitor
   - License risk: `src/shieldops/compliance/license_risk.py` — DependencyLicenseRiskAnalyzer
   - Comm effectiveness: `src/shieldops/incidents/comm_effectiveness.py` — CommEffectivenessAnalyzer
   - Readiness scorer: `src/shieldops/operations/readiness_scorer.py` — OperationalReadinessScorer
   - Auto triage: `src/shieldops/incidents/auto_triage.py` — IncidentAutoTriageEngine
   - Self healing: `src/shieldops/operations/self_healing.py` — SelfHealingOrchestrator
   - Recurrence pattern: `src/shieldops/incidents/recurrence_pattern.py` — RecurrencePatternDetector
   - Policy impact: `src/shieldops/compliance/policy_impact.py` — PolicyImpactScorer
   - Audit intelligence: `src/shieldops/audit/audit_intelligence.py` — AuditIntelligenceAnalyzer
   - Automation gap: `src/shieldops/operations/automation_gap.py` — AutomationGapIdentifier
   - Capacity demand: `src/shieldops/analytics/capacity_demand.py` — CapacityDemandModeler
   - Spot advisor: `src/shieldops/billing/spot_advisor.py` — SpotInstanceAdvisor
   - Scaling efficiency: `src/shieldops/operations/scaling_efficiency.py` — ScalingEfficiencyTracker
   - Reliability antipattern: `src/shieldops/topology/reliability_antipattern.py` — ReliabilityAntiPatternDetector
   - Error budget forecast: `src/shieldops/sla/error_budget_forecast.py` — ErrorBudgetForecaster
   - Dependency risk: `src/shieldops/topology/dependency_risk.py` — DependencyRiskScorer
   - Incident similarity: `src/shieldops/incidents/incident_similarity.py` — IncidentSimilarityEngine
   - Incident cost: `src/shieldops/incidents/incident_cost.py` — IncidentCostCalculator
   - Followup tracker: `src/shieldops/incidents/followup_tracker.py` — PostIncidentFollowupTracker
   - Cognitive load: `src/shieldops/operations/cognitive_load.py` — TeamCognitiveLoadTracker
   - Collaboration scorer: `src/shieldops/analytics/collaboration_scorer.py` — CrossTeamCollaborationScorer
   - Contribution tracker: `src/shieldops/knowledge/contribution_tracker.py` — KnowledgeContributionTracker
   - API performance: `src/shieldops/analytics/api_performance.py` — APIPerformanceProfiler
   - Resource contention: `src/shieldops/analytics/resource_contention.py` — ResourceContentionDetector
   - Rollback analyzer: `src/shieldops/changes/rollback_analyzer.py` — DeploymentRollbackAnalyzer
   - Attack surface: `src/shieldops/security/attack_surface.py` — AttackSurfaceMonitor
   - Runbook recommender: `src/shieldops/operations/runbook_recommender.py` — RunbookRecommendationEngine
   - Reliability scorecard: `src/shieldops/sla/reliability_scorecard.py` — PlatformReliabilityScorecard
   - LLM cost tracker: `src/shieldops/billing/llm_cost_tracker.py` — LLMTokenCostTracker
   - Cloud arbitrage: `src/shieldops/billing/cloud_arbitrage.py` — CloudCostArbitrageAnalyzer
   - Observability cost: `src/shieldops/observability/observability_cost.py` — ObservabilityCostAllocator
   - Lead time analyzer: `src/shieldops/changes/lead_time_analyzer.py` — ChangeLeadTimeAnalyzer
   - Flag impact: `src/shieldops/config/flag_impact.py` — FeatureFlagImpactAnalyzer
   - Deployment dependency: `src/shieldops/changes/deployment_dependency.py` — DeploymentDependencyTracker
   - Postmortem quality: `src/shieldops/incidents/postmortem_quality.py` — PostmortemQualityScorer
   - DR drill tracker: `src/shieldops/operations/dr_drill_tracker.py` — DRDrillTracker
   - Escalation optimizer: `src/shieldops/incidents/escalation_optimizer.py` — IncidentEscalationPathOptimizer
   - Tenant quota: `src/shieldops/operations/tenant_quota.py` — TenantResourceQuotaManager
   - Decision audit: `src/shieldops/audit/decision_audit.py` — DecisionAuditLogger
   - Retention policy: `src/shieldops/observability/retention_policy.py` — DataRetentionPolicyManager
   - **Phase 36 (Planned):** Twilio SMS gateway, Twilio voice alerts, Teams notifier, agent swarm coordinator, agent consensus engine, agent knowledge mesh, risk signal aggregator, dynamic risk scorer, predictive alert engine, agent token optimizer, prompt cache manager, agent routing optimizer
   - **Phase 37 (Planned):** Threat hunt orchestrator, security response automator, zero trust verifier, remediation pipeline orchestrator, recovery coordinator, runbook chain executor, SLO auto-scaler, reliability automation engine, incident prevention engine, cross-agent policy enforcer, agent telemetry analyzer, agent compliance auditor
   - **Phase 38 (Planned):** War room orchestrator, root cause verifier, comm automator, security posture simulator, credential rotation orchestrator, compliance evidence automator, chaos experiment automator, multi-region failover coordinator, capacity burst manager, platform cost optimizer, service mesh intelligence, operational runbook generator
   - Verify each module initializes in `src/shieldops/api/app.py` lifespan

6. **Check configuration**:
   - Verify `.env` file exists (warn if missing)
   - Check required env vars are set (DATABASE_URL, REDIS_URL, etc.)
   - Validate OPA policies: check `playbooks/policies/` for syntax

## Output Format
Report each check as PASS/FAIL/WARN with details.
If `--fix` is passed, auto-fix what's possible (format, install missing deps).
